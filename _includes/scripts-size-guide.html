<script type="text/javascript">
    $(document).ready(function(){

        const centimetresKeyword = "Centimetres";
        const inchesKeyword = "Inches";
        const centimetresRegex = new RegExp(centimetresKeyword);
        const inchesRegex = new RegExp(inchesKeyword);
        const sizeXtraSmall = "Size Xtra Small";
        const sizeSmall = "Size Small";
        const sizeMedium = "Size Medium";
        const sizeLarge = "Size Large";

        $("[name=measurementTypeRadioButton]").click(function()  {
            var chosenMeasurementValue = $(this).val();
            
            const measurementTypeLabel = "You're measuring using " + chosenMeasurementValue;

            $("#measurementTypeLabel").text(measurementTypeLabel);

            var measurementSelectList = $("#measurementValueSelectList");

            for (i = 0; i < measurementSelectList.length; i++) 
            { 
                var currentMeasurementValue = measurementSelectList.options[i].value;
                var currentMeasurementText = measurementSelectList.options[i].text;

                var strippedMeasurementResultsForValue = stripInputMeasurementValue(currentMeasurementValue);
                const strippedInputMeasurementValue = strippedMeasurementResultsForValue[0];
                var strippedMeasurementResultsForText = stripInputMeasurementValue(currentMeasurementValue);
                const strippedInputMeasurementText = strippedMeasurementResultsForText[0];

                var newMeasurementValue = strippedInputMeasurementValue + " " + chosenMeasurementValue;
                var newMeasurementText = strippedInputMeasurementText + " " + chosenMeasurementValue;

                measurementSelectList.options[i].value = newMeasurementValue;
                measurementSelectList.options[i].text = newMeasurementText;
            }
        });

        $('#measurementValueSelectList').change(function() {
            var currentlySelectedMeasurementValue = $('#measurementValueSelectList option:selected').val();

            // console.log("Chosen " + currentlySelectedMeasurementValue);

            var correctProductSize = determineCorrectProductSizeToPurchase(currentlySelectedMeasurementValue);

            $("#correctProductSizeLabel").text(correctProductSize);

            showProductSizeResults();
        });

        function stripInputMeasurementValue(inputMeasurementValue)
        {
            if(inputMeasurementValue.indexOf(centimetresKeyword) !== -1)
            {
                // console.log("Contains Cm");
                var strippedInputMeasurementValueCentimetres = inputMeasurementValue.replace(centimetresRegex,"");

                return [strippedInputMeasurementValueCentimetres, centimetresKeyword];
            }
            else if(inputMeasurementValue.indexOf(inchesKeyword) !== -1)
            {
                // console.log("Contains In");
                var strippedInputMeasurementValueInches = inputMeasurementValue.replace(inchesRegex,"");

                return [strippedInputMeasurementValueInches, inchesKeyword];
            }
        }

        function determineCorrectProductSizeToPurchase(inputMeasurementValue)
        {
            var strippedMeasurementResults = stripInputMeasurementValue(inputMeasurementValue);
            const strippedInputMeasurementValue = strippedMeasurementResults[0];
            const measurementValueType = strippedMeasurementResults[1];

            if(measurementValueType == centimetresKeyword)
            {
                return lookupCentimetresMeasurement(strippedInputMeasurementValue);
            }
            else if(measurementValueType == inchesKeyword)
            {
                return lookupInchesMeasurement(strippedInputMeasurementValue);
            }
        }

        function lookupCentimetresMeasurement(inputCentimetreValue)
        {
            if (inputCentimetreValue >= 1 && inputCentimetreValue <= 3) {
                return sizeXtraSmall;
            }
            else if (inputCentimetreValue >= 4 && inputCentimetreValue <= 6) {
                return sizeSmall;
            }
            else if (inputCentimetreValue >= 7 && inputCentimetreValue <= 9) {
                return sizeMedium;
            }
            else if (inputCentimetreValue >= 10 && inputCentimetreValue <= 12) {
                return sizeLarge;
            }
        }

        function lookupInchesMeasurement(inputInchesValue)
        {
            if (inputInchesValue >= 1 && inputInchesValue <= 3) {
                return sizeXtraSmall;
            }
            else if (inputInchesValue >= 4 && inputInchesValue <= 6) {
                return sizeSmall;
            }
            else if (inputInchesValue >= 7 && inputInchesValue <= 9) {
                return sizeMedium;
            }
            else if (inputInchesValue >= 10 && inputInchesValue <= 12) {
                return sizeLarge;
            }
        }

        function showProductSizeResults()
        {
            $("#productSizeResults").show();
        }
    });
</script>